<div class="password-forgotten-wrapper">
  <form id="formPasswordForgotten" [formGroup]="form">
    <div class="form-group">
      <input
        id="emailInput"
        name="emailInput"
        class="login-email"
        type="text"
        placeholder="Email"
        required
        formControlName="email"
        [ngClass]="{
          'is-invalid': submitted && form.controls['email'].errors
        }"
      />
      @if (submitted && form.controls['email'].errors) {
      <div class="invalid-feedback">
        @if (form.controls['email'].errors['required']) {
        <span>Value is required</span>
        }
      </div>
      }
    </div>

    @if (user && isUserFound) {
    <div class="form-group">
      <input
        id="newpasswordInput"
        name="newpasswordInput"
        class="password-forgotten"
        type="password"
        placeholder="Enter a new password"
        required
        formControlName="newPassword"
        [ngClass]="{
          'is-invalid': submitted && form.controls['newPassword'].errors
        }"
      />
      @if (submitted && form.controls['password'].errors) {
      <div class="invalid-feedback">
        @if (form.controls['password'].errors['required']) {
        <span>Value is required</span>
        }
      </div>
      }
    </div>
    <button
      type="submit"
      class="password-forgotten-submit"
      (click)="emitNewPassword($event)"
    >
      Create a new password
    </button>
    }

    <div>
      @if (!isUserFound) {
      <button
        type="submit"
        class="password-forgotten-submit"
        (click)="findUserByEmail($event)"
        [disabled]="form.controls['newPassword'].errors"
      >
        Submit
      </button>
      }
      <div>
        <a routerLink="/auth">Return to the auth page</a>
      </div>
    </div>
  </form>
</div>
